"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}!function e(t,n,i){function a(r,s){if(!n[r]){if(!t[r]){var c="function"==typeof require&&require;if(!s&&c)return c(r,!0);if(o)return o(r,!0);throw new Error("Cannot find module '"+r+"'")}var l=n[r]={exports:{}};t[r][0].call(l.exports,function(e){var n=t[r][1][e];return a(n||e)},l,l.exports,e,t,n,i)}return n[r].exports}for(var o="function"==typeof require&&require,r=0;r<i.length;r++)a(i[r]);return a}({1:[function(e,t,n){var i=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"CheckDiscTimer",value:function(){$.ajax({url:e.cookieParams.url,method:"POST",data:{type:"show_time"},dataType:"json"}).then(function(e){if("active"==e.status){var t=e.remain;$(".digit-time-left").find("span")[0].innerText=parseInt(t/60)>=10?parseInt(t/60):"0"+parseInt(t/60).toString(),$(".digit-time-left").find("span")[1].innerText=t%60>=10?t%60:"0"+(t%60).toString(),$(".time-left").removeClass("mfp-hide");var n=setInterval(function(){(t-=1)<=0&&(clearInterval(n),$.ajax({url:"/test/ajax.php",method:"POST",data:{type:"show_time"},dataType:"json"}),$(".time-left").addClass("mfp-hide"));var e=parseInt(t/60),i=t%60;$(".digit-time-left").find("span")[0].innerText=e>=10?e:"0"+e.toString(),$(".digit-time-left").find("span")[1].innerText=i>=10?i:"0"+i.toString()},1e3)}})}},{key:"cookieParams",get:function(){return{state:"BITRIX_SM_discount_added",timestamp:"BITRIX_SM_discount_timestamp",url:"/test/ajax.php"}}}]),e}();t.exports=i},{}],2:[function(e,t,n){var i;i=e("./class.js"),$(document).ready(function(){i.CheckDiscTimer(),void 0!==Cookies.get("BITRIX_SM_discount_added")&&0!=Cookies.get("BITRIX_SM_discount_added")||(void 0===Cookies.get("cancel_click")||parseInt(Cookies.get("cancel_click"))<=2)&&setTimeout(function(){$.magnificPopup.open({items:{src:".promotion-popup"}})},6e4),$("a.more-detail").on("click",function(e){e.preventDefault(),$(".area3").toggleClass("mfp-hide"),$(this).find("svg").toggleClass("rotation")}),$(".area2 button").on("click",function(e){var t=this;$(this).hasClass("done")||$.ajax({url:i.cookieParams.url,method:"POST",data:{type:"addDiscount"},dataType:"json"}).then(function(e){"added"==e.status?($(t).addClass("done"),$(t).text("скидка применена!"),i.CheckDiscTimer()):"error"==e.status&&alert(e.error_text)})}),$(".promotion-popup-close").on("click",function(e){if(void 0===Cookies.get("cancel_click"))Cookies.set("cancel_click","1",{expires:365,path:"",domain:document.domain});else{var t=parseInt(Cookies.get("cancel_click"));Cookies.set("cancel_click",++t,{expires:365,path:"",domain:document.domain})}e.preventDefault(),$.magnificPopup.close()})})},{"./class.js":1}]},{},[2]);